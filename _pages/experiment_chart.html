---
layout: archive
title: "GS Performance Chart"
permalink: /experiment-chart/
author_profile: true
redirect_from:
  - /resume
---

{% include base_path %}

<script src="https://cdn.plot.ly/plotly-3.3.0.min.js" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<div id="chart1" class="chart"></div>

<div id="chart2" class="chart"></div>

<div id="chart3" class="chart"></div>

<div id="chart4" class="chart"></div>

<div id="chart5" class="chart"></div>

<div id="chart6" class="chart"></div>

<script src="{{ base_path }}/assets/js/charty.js"></script>

<script>

function createAllCharts() {
  if (!charty.dataManager.isInitialized()) return;

  var allset = charty.dataManager.subset();
  
  var data = allset.data;
  var uniqueMethods = allset.uniqueMethods;
  var colorMap = allset.colorMap;
  var colorMapLight = allset.colorMapLight;
  var methods = allset.methods;
  var gpu = allset.gpu;
  var times = allset.times;
  var uniqueDownsampling = allset.uniqueDownsampling;
  
  var layout_base = charty.getThemedLayoutBase();
  var barStyle = charty.getThemedBarStyle();
  var plotConfig = {displayModeBar: false};

  var traces1 = [];
  uniqueMethods.forEach((method, i) => {
    var row = data.find(d => d.method === method && d.downsampling == 8);
    if (!row) return;
    traces1.push({
      x: [method],
      y: [parseFloat(row.psnr_7k_train) || 0],
      name: i === 0 ? '7k' : '',
      legendgroup: '7k',
      showlegend: i === 0,
      type: 'bar',
      marker: {color: colorMapLight[method], line: barStyle.line},
      offsetgroup: '7k'
    });
    traces1.push({
      x: [method],
      y: [parseFloat(row.psnr_30k_train) || 0],
      name: i === 0 ? '30k' : '',
      legendgroup: '30k',
      showlegend: i === 0,
      type: 'bar',
      marker: {color: colorMap[method], line: barStyle.line},
      offsetgroup: '30k'
    });
  });

  Plotly.newPlot('chart1', traces1, Object.assign({}, layout_base, {
    title: {text: '(a) Training PSNR with Downsampling Factor 8: 7k vs 30k', font: {size: 14}, x: 0.5},
    barmode: 'group',
    xaxis: Object.assign({}, layout_base.xaxis, {}),
    yaxis: Object.assign({}, layout_base.yaxis, {title: {text: 'PSNR (dB)', font: {size: 12}}}),
    legend: Object.assign({}, layout_base.legend, {
      traceorder: 'grouped'
    })
  }), plotConfig);

  var traces2 = [];
  uniqueMethods.forEach((method, i) => {
    var row = data.find(d => d.method === method && d.downsampling == 8);
    traces2.push({
      x: [method],
      y: [parseFloat(row.psnr_30k_train) || 0],
      name: i === 0 ? 'Train' : '',
      legendgroup: 'Train',
      showlegend: i === 0,
      type: 'bar',
      marker: {color: colorMap[method], line: barStyle.line},
      offsetgroup: 'Train'
    });
    traces2.push({
      x: [method],
      y: [parseFloat(row.psnr_30k_test) || 0],
      name: i === 0 ? 'Test' : '',
      legendgroup: 'Test',
      showlegend: i === 0,
      type: 'bar',
      marker: {color: colorMapLight[method], line: barStyle.line},
      offsetgroup: 'Test'
    });
  });

  Plotly.newPlot('chart2', traces2, Object.assign({}, layout_base, {
    title: {text: '(b) PSNR with Downsampling Factor 8: Train vs Test (30k)', font: {size: 14}, x: 0.5},
    barmode: 'group',
    xaxis: Object.assign({}, layout_base.xaxis, {}),
    yaxis: Object.assign({}, layout_base.yaxis, {title: {text: 'PSNR (dB)', font: {size: 12}}}),
    legend: Object.assign({}, layout_base.legend, {
      traceorder: 'grouped'
    })
  }), plotConfig);

  Plotly.newPlot('chart4', [{
    x: uniqueMethods,
    y: uniqueMethods.map(m => times[methods.findIndex(x => x === m)] / 60),
    type: 'bar',
    marker: Object.assign({color: uniqueMethods.map(m => colorMap[m])}, barStyle),
    text: uniqueMethods.map(m => gpu[methods.findIndex(x => x === m)]),
    textposition: 'outside',
    textfont: {size: 9, color: charty.getCurrentTheme() === 'dark' ? '#ccc' : '#333'}
  }], Object.assign({}, layout_base, {
    title: {text: '(c) Training Time with Downsampling Factor 8', font: {size: 14}, x: 0.5},
    showlegend: false,
    xaxis: Object.assign({}, layout_base.xaxis, {}),
    yaxis: Object.assign({}, layout_base.yaxis, {title: {text: 'Time (min)', font: {size: 12}}})
  }), plotConfig);

  var traces5 = uniqueMethods.map(method => {
    var yVals = uniqueDownsampling.map(ds => {
      var row = data.find(d => d.method === method && d.downsampling == ds);
      return row ? parseFloat(row.psnr_30k_train) || null : null;
    });
    return {
      x: uniqueDownsampling.map(d => '1/' + d),
      y: yVals,
      name: method,
      type: 'bar',
      hovertemplate: method + '<br>Factor: %{x}<br>PSNR: %{y:.2f} dB<extra></extra>',
      marker: Object.assign({color: colorMap[method]}, barStyle)
    };
  });

  Plotly.newPlot('chart5', traces5, Object.assign({}, layout_base, {
    title: {text: '(d) PSNR vs Resolution (30k)', font: {size: 14}, x: 0.5},
    barmode: 'group',
    xaxis: Object.assign({}, layout_base.xaxis, {tickangle: 0}),
    yaxis: Object.assign({}, layout_base.yaxis, {title: {text: 'PSNR (dB)', font: {size: 12}}})
  }), plotConfig);

  var traces6 = [];
  
  uniqueMethods.forEach((method, i) => {
    traces6.push({
      x: [null],
      y: [null],
      name: method,
      legendgroup: method,
      type: 'scatter',
      mode: 'markers',
      marker: {
        color: colorMap[method],
        symbol: 'circle',
        size: 10,
        line: {color: charty.getCurrentTheme() === 'dark' ? '#666' : '#000', width: 1}
      }
    });
  });
  
  uniqueDownsampling.forEach((ds, i) => {
    traces6.push({
      x: [null],
      y: [null],
      name: '1/' + ds,
      legendgroup: 'factors',
      type: 'scatter',
      mode: 'markers',
      marker: {
        color: '#666',
        symbol: charty.markerShapes[ds] || 'circle',
        size: 10,
        line: {color: charty.getCurrentTheme() === 'dark' ? '#666' : '#000', width: 1}
      }
    });
  });
  
  uniqueMethods.forEach(method => {
    uniqueDownsampling.forEach(ds => {
      var methodData = data.filter(d => d.method === method && d.downsampling == ds);
      if (methodData.length === 0) return;
      traces6.push({
        x: methodData.map(d => parseFloat(d.gs_number) || 0),
        y: methodData.map(d => parseFloat(d.psnr_30k_train) || 0),
        legendgroup: method,
        showlegend: false,
        hovertemplate: method + ' (1/' + ds + ')<br>GS: %{x:.3s}<br>PSNR: %{y:.2f} dB<extra></extra>',
        type: 'scatter',
        mode: 'markers',
        marker: {
          color: colorMap[method],
          symbol: charty.markerShapes[ds] || 'circle',
          size: 10,
          line: {color: charty.getCurrentTheme() === 'dark' ? '#666' : '#000', width: 1}
        }
      });
    });
  });

  Plotly.newPlot('chart6', traces6, Object.assign({}, layout_base, {
    title: {text: '(e) GS Number vs PSNR (30k)', font: {size: 14}, x: 0.5},
    xaxis: Object.assign({}, layout_base.xaxis, {tickangle: 0, rangemode: 'tozero'}),
    yaxis: Object.assign({}, layout_base.yaxis, {title: {text: 'PSNR (dB)', font: {size: 12}}}),
    legend: Object.assign({}, layout_base.legend, {
      tracegroupgap: 0
    })
  }), plotConfig);
}


Papa.parse(charty.sheetsUrls.Ours, {
  download: true,
  header: true,

  complete: function(results) {
    charty.dataManager.init(results.data);

    createAllCharts();

    const observer = new MutationObserver(() => {
      createAllCharts();
    });

    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['class', 'data-theme']
    });

    observer.observe(document.body, {
      attributes: true,
      attributeFilter: ['class', 'data-theme']
    });

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
      createAllCharts();
    });
  }
});
</script>`